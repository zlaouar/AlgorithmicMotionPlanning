
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Problem2b</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-10-23"><meta name="DC.source" content="Problem2b.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#1">Housekeeping</a></li><li><a href="#2">i)</a></li><li><a href="#3">ii) Path</a></li><li><a href="#4">iii)</a></li></ul></div><h2 id="1">Housekeeping</h2><pre class="codeinput">clear <span class="string">all</span>
close <span class="string">all</span>
clc

<span class="comment">% Define obstacle vertices</span>
W1_WO1 = [1,1; 2,1; 2,5; 1,5];
W1_WO2 = [3,4; 4,4; 4,12; 3,12];
W1_WO3 = [3,12; 12,12; 12,13; 3,13];
W1_WO4 = [12,5; 13,5; 13,13; 12,13];
W1_WO5 = [6,5; 12,5; 12,6; 6,6];
W1 = [W1_WO1 W1_WO2 W1_WO3 W1_WO4 W1_WO5];

W2_WO1 = [-6,-6; 25,-6; 25,-5; -6,-5];
W2_WO2 = [-6,5; 30,5; 30,6; -6,6];
W2_WO3 = [-6,-5; -5,-5; -5,5; -6,5];
W2_WO4 = [4,-5; 5,-5; 5,1; 4,1];
W2_WO5 = [9,0; 10,0; 10,5; 9,5];
W2_WO6 = [14,-5; 15,-5; 15,1; 14,1];
W2_WO7 = [19,0; 20,0; 20,5; 19,5];
W2_WO8 = [24,-5; 25,-5; 25,1; 24,1];
W2_WO9 = [29,0; 30,0; 30,5; 29,5];
W2 = [W2_WO1 W2_WO2 W2_WO3 W2_WO4 W2_WO5 W2_WO6 W2_WO7 W2_WO8 W2_WO9];
<span class="comment">% i) Plot Vector Field _________________________________________________</span>
figure
<span class="comment">%subplot(1,2,1)</span>
field_info = csvread(<span class="string">'field_2b1.csv'</span>);
meta_data = num2cell(field_info(1,1:5));
[top,bottom,left,buffer,scale_factor] = deal(meta_data{:});
mat_field = field_info(2:end,1:end-1);
[h,w] = size(mat_field);
<span class="comment">% for i=1:h</span>
<span class="comment">%    for j=1:w/2</span>
<span class="comment">%        quiver((left-buffer+j-1)/scale_factor,(top+buffer-i)/scale_factor,mat_field(i,2*(j-1)+1),mat_field(i,2*(j-1)+2),'b')</span>
<span class="comment">%        hold on</span>
<span class="comment">%    end</span>
<span class="comment">% end</span>
<span class="comment">% Plot obstacles</span>
<span class="keyword">for</span> i=1:2:length(W1)
   plot([W1(:,i);W1(1,i)],[W1(:,i+1);W1(1,i+1)],<span class="string">'r'</span>);
   hold <span class="string">on</span>
<span class="keyword">end</span>
xlim([0 15]);
ylim([0 15]);
xlabel(<span class="string">'q_1'</span>)
ylabel(<span class="string">'q_2'</span>)
title(<span class="string">'Vector Field'</span>)
</pre><img vspace="5" hspace="5" src="Problem2b_01.png" alt=""> <h2 id="2">i)</h2><pre class="codeinput">fprintf(<span class="string">"I started with a large dstar_goal and slowly decreased it \n"</span>)
fprintf(<span class="string">"until I saw that the attractive forces were decreasing smoothly\n"</span>)
fprintf(<span class="string">"and the robot was able to escape the first obstacle to the right. The Qstar\n"</span>)
fprintf(<span class="string">"for the first obstacle was very small to help the robot escape the \n"</span>)
fprintf(<span class="string">"obstacle closesly. The Qstar for the rest of the obstacles were the \n"</span>)
fprintf(<span class="string">"same and slightly larger to push the obstacle to the right\n"</span>)
</pre><pre class="codeoutput">I started with a large dstar_goal and slowly decreased it 
until I saw that the attractive forces were decreasing smoothly
and the robot was able to escape the first obstacle to the right. The Qstar
for the first obstacle was very small to help the robot escape the 
obstacle closesly. The Qstar for the rest of the obstacles were the 
same and slightly larger to push the obstacle to the right
</pre><h2 id="3">ii) Path</h2><pre class="codeinput">mat = csvread(<span class="string">'path_2b1.csv'</span>);
<span class="comment">%subplot(1,2,2)</span>
start = [0,0];
goal = [10,10];
h = zeros(3,1);
h(1) = plot(start(1),start(2),<span class="string">'om'</span>,<span class="string">'Linewidth'</span>,2);
hold <span class="string">on</span>
h(3) = plot(goal(1),goal(2),<span class="string">'xk'</span>,<span class="string">'Linewidth'</span>,2);
h(2) = plot((mat(:,1)-abs(left)-buffer)/scale_factor,(mat(:,2)-abs(bottom)-buffer)/scale_factor,<span class="string">'b'</span>,<span class="string">'Linewidth'</span>,2);
<span class="comment">% Plot obstacles</span>
<span class="keyword">for</span> i=1:2:length(W1)
   plot([W1(:,i);W1(1,i)],[W1(:,i+1);W1(1,i+1)],<span class="string">'r'</span>);
   hold <span class="string">on</span>
<span class="keyword">end</span>
legend(h,<span class="string">'start'</span>,<span class="string">'path'</span>,<span class="string">'goal'</span>)
grid <span class="string">on</span>
grid <span class="string">minor</span>
xlabel(<span class="string">'q_1'</span>)
ylabel(<span class="string">'q_2'</span>)
title(<span class="string">'Attractive-Repulsive Gradient Descent Path'</span>)
x0=100;
y0=50;
width=400;
height=400;
<span class="comment">%set(gcf,'position',[x0,y0,width,height])</span>
</pre><img vspace="5" hspace="5" src="Problem2b_02.png" alt=""> <h2 id="4">iii)</h2><pre class="codeinput">len_path=0;
<span class="keyword">for</span> i=1:length(mat)-1
    len_path = len_path + sqrt((mat(i+1,1)-mat(i,1))^2 + (mat(i+1,2)-mat(i,2))^2);
<span class="keyword">end</span>
fprintf(<span class="string">"The lenght of path 1 is: %f\n"</span>,len_path/scale_factor)
</pre><pre class="codeoutput">The lenght of path 1 is: 14.742592
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Housekeeping
clear all
close all
clc

% Define obstacle vertices
W1_WO1 = [1,1; 2,1; 2,5; 1,5];
W1_WO2 = [3,4; 4,4; 4,12; 3,12];
W1_WO3 = [3,12; 12,12; 12,13; 3,13];
W1_WO4 = [12,5; 13,5; 13,13; 12,13];
W1_WO5 = [6,5; 12,5; 12,6; 6,6];
W1 = [W1_WO1 W1_WO2 W1_WO3 W1_WO4 W1_WO5];

W2_WO1 = [-6,-6; 25,-6; 25,-5; -6,-5];
W2_WO2 = [-6,5; 30,5; 30,6; -6,6];
W2_WO3 = [-6,-5; -5,-5; -5,5; -6,5];
W2_WO4 = [4,-5; 5,-5; 5,1; 4,1];
W2_WO5 = [9,0; 10,0; 10,5; 9,5];
W2_WO6 = [14,-5; 15,-5; 15,1; 14,1];
W2_WO7 = [19,0; 20,0; 20,5; 19,5];
W2_WO8 = [24,-5; 25,-5; 25,1; 24,1];
W2_WO9 = [29,0; 30,0; 30,5; 29,5];
W2 = [W2_WO1 W2_WO2 W2_WO3 W2_WO4 W2_WO5 W2_WO6 W2_WO7 W2_WO8 W2_WO9];
% i) Plot Vector Field _________________________________________________
figure
%subplot(1,2,1)
field_info = csvread('field_2b1.csv');
meta_data = num2cell(field_info(1,1:5));
[top,bottom,left,buffer,scale_factor] = deal(meta_data{:}); 
mat_field = field_info(2:end,1:end-1);
[h,w] = size(mat_field);
% for i=1:h
%    for j=1:w/2
%        quiver((left-buffer+j-1)/scale_factor,(top+buffer-i)/scale_factor,mat_field(i,2*(j-1)+1),mat_field(i,2*(j-1)+2),'b')
%        hold on
%    end
% end
% Plot obstacles
for i=1:2:length(W1)
   plot([W1(:,i);W1(1,i)],[W1(:,i+1);W1(1,i+1)],'r');
   hold on
end
xlim([0 15]);
ylim([0 15]);
xlabel('q_1')
ylabel('q_2')
title('Vector Field')

%% i)
fprintf("I started with a large dstar_goal and slowly decreased it \n")
fprintf("until I saw that the attractive forces were decreasing smoothly\n")
fprintf("and the robot was able to escape the first obstacle to the right. The Qstar\n")
fprintf("for the first obstacle was very small to help the robot escape the \n")
fprintf("obstacle closesly. The Qstar for the rest of the obstacles were the \n")
fprintf("same and slightly larger to push the obstacle to the right\n")

%% ii) Path
mat = csvread('path_2b1.csv');
%subplot(1,2,2)
start = [0,0];
goal = [10,10];
h = zeros(3,1);
h(1) = plot(start(1),start(2),'om','Linewidth',2);
hold on
h(3) = plot(goal(1),goal(2),'xk','Linewidth',2);
h(2) = plot((mat(:,1)-abs(left)-buffer)/scale_factor,(mat(:,2)-abs(bottom)-buffer)/scale_factor,'b','Linewidth',2);
% Plot obstacles
for i=1:2:length(W1)
   plot([W1(:,i);W1(1,i)],[W1(:,i+1);W1(1,i+1)],'r');
   hold on
end
legend(h,'start','path','goal')
grid on
grid minor
xlabel('q_1')
ylabel('q_2')
title('Attractive-Repulsive Gradient Descent Path')
x0=100;
y0=50;
width=400;
height=400;
%set(gcf,'position',[x0,y0,width,height])

%% iii)
len_path=0;
for i=1:length(mat)-1
    len_path = len_path + sqrt((mat(i+1,1)-mat(i,1))^2 + (mat(i+1,2)-mat(i,2))^2);
end
fprintf("The lenght of path 1 is: %f\n",len_path/scale_factor)

##### SOURCE END #####
--></body></html>